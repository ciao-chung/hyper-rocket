(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{386:function(t,e,a){"use strict";a.r(e);var n=a(49),s=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"nuxt-site佈署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nuxt-site佈署"}},[t._v("#")]),t._v(" Nuxt Site佈署")]),t._v(" "),a("h2",{attrs:{id:"可用屬性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可用屬性"}},[t._v("#")]),t._v(" 可用屬性")]),t._v(" "),a("ul",[a("li",[t._v("env(optional): Object, 佈署指令將會把此env物件設定到src/config/env.json, 當前端一些設定需要依照不同佈署設定來調整的時候, env屬性將是一個很好的選擇")]),t._v(" "),a("li",[t._v("vuePublicFolderPath(optional): String, nuxt專案的public目錄(root)名稱, 使用預設為"),a("code",[t._v("static")])]),t._v(" "),a("li",[t._v("build:\n"),a("ul",[a("li",[t._v("clientBuildScript(optional): 當"),a("code",[t._v("nuxt.target")]),t._v("設定為"),a("code",[t._v("static")]),t._v("時有作用, client端的打包指令, 預設為"),a("code",[t._v("yarn generate")])]),t._v(" "),a("li",[t._v("serverBuildScript(optional): 當"),a("code",[t._v("nuxt.target")]),t._v("設定為"),a("code",[t._v("server")]),t._v("時有作用, server端的打包指令, 預設為"),a("code",[t._v("yarn build")])])])]),t._v(" "),a("li",[t._v("nuxt(required): Object, nuxt專用設定, 詳見下方"),a("code",[t._v("nuxt設定")]),t._v("段落")])]),t._v(" "),a("h2",{attrs:{id:"nuxt設定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nuxt設定"}},[t._v("#")]),t._v(" nuxt設定")]),t._v(" "),a("ul",[a("li",[t._v("target(required): "),a("code",[t._v("nuxt target")]),t._v(", 可用值為"),a("code",[t._v("server")]),t._v("或"),a("code",[t._v("static")])]),t._v(" "),a("li",[t._v("pm2AppName(optional): "),a("code",[t._v("nuxt target")]),t._v("為"),a("code",[t._v("server")]),t._v("時, 需要透過"),a("code",[t._v("pm2")]),t._v("啟動"),a("code",[t._v("nuxt")]),t._v(", 這個設定為該"),a("code",[t._v("pm2")]),t._v("的"),a("code",[t._v("process name")]),t._v(", 預設為"),a("code",[t._v("nuxt-site")])]),t._v(" "),a("li",[t._v("port(optional): "),a("code",[t._v("nuxt start")]),t._v("啟動的"),a("code",[t._v("port")]),t._v(", 預設為"),a("code",[t._v("8888")])]),t._v(" "),a("li",[t._v("buildAtClient(optional): 在client端打包前端, 優點是可以將打包的負載轉嫁到執行發佈client端, 缺點是"),a("code",[t._v("rsync")]),t._v("的檔案數量非常多")])]),t._v(" "),a("h2",{attrs:{id:"rsync屬性額外子屬性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rsync屬性額外子屬性"}},[t._v("#")]),t._v(" rsync屬性額外子屬性")]),t._v(" "),a("ul",[a("li",[t._v("removeRemoteBeforeRsync: Boolean, rsync之前刪除遠端目錄")])]),t._v(" "),a("h2",{attrs:{id:"deploy-single-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-single-server"}},[t._v("#")]),t._v(" deploy(Single Server)")]),t._v(" "),a("blockquote",[a("p",[t._v("若不使用SSL, 可不使用"),a("code",[t._v("ssl")]),t._v("及"),a("code",[t._v("email")]),t._v("參數")])]),t._v(" "),a("p",[a("strong",[t._v("參數")])]),t._v(" "),a("ul",[a("li",[t._v("port(required): String, 內部Proxy Port")]),t._v(" "),a("li",[t._v("proxyPort: String, 要轉接的外部Port(預設為80)")]),t._v(" "),a("li",[t._v("domain(required): String, 網域, 如果是本機請使用localhost")]),t._v(" "),a("li",[t._v("ssl: Boolean, 使用SSL")]),t._v(" "),a("li",[t._v("email: String, Let's encrypt email")]),t._v(" "),a("li",[t._v("filename(required): String, 存在/etc/nginx/sites-available/中的檔名, 例如: site.conf")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("hyper-rocket nginx:nuxt "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --ssl "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("     \n    --spa "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("     \n    --filename "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("domain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".conf "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --path /home/site/project/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("project-name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("/frontend "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --domain "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("domain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --email "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h2",{attrs:{id:"deploy-multi-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-multi-server"}},[t._v("#")]),t._v(" deploy(Multi Server)")]),t._v(" "),a("p",[t._v("基本上同"),a("code",[t._v("Single Server")]),t._v("佈署方式")]),t._v(" "),a("p",[t._v("只要將"),a("code",[t._v("host")]),t._v("改為"),a("code",[t._v("localhost")])]),t._v(" "),a("p",[t._v("並不要使用"),a("code",[t._v("ssl")]),t._v("及"),a("code",[t._v("email")]),t._v("選項即可")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("hyper-rocket nginx:nuxt "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --ssl "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("     \n    --spa "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("     \n    --filename "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("domain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".conf "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --path /home/site/project/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("project-name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("/frontend "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --domain "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("domain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --email "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=s.exports}}]);